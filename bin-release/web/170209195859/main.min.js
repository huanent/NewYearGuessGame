var BeginUI=function(e){function t(){e.call(this),this.tabFireEvent=new TabFireEvent(TabFireEvent.NAME),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){this.AddBg(),this.AddTimer()},n.AddBg=function(){this.bg1=new egret.Bitmap(RES.getRes("光芒背景1_png")),e.prototype.addChild.call(this,this.bg1),this.bg2=new egret.Bitmap(RES.getRes("光芒背景2_png")),e.prototype.addChild.call(this,this.bg2);var t=new egret.Bitmap(RES.getRes("chuanglian_png"));e.prototype.addChild.call(this,t),this.lamp1=new egret.Bitmap(RES.getRes("灯笼左边_png")),this.lamp1.x=20,this.lamp1.y=70,this.lamp1.rotation=20,e.prototype.addChild.call(this,this.lamp1),this.lamp2=new egret.Bitmap(RES.getRes("灯笼右边_png")),this.lamp2.x=700-this.lamp2.width,this.lamp2.y=70,this.lamp1.rotation=20,e.prototype.addChild.call(this,this.lamp2);var i=new egret.Bitmap(RES.getRes("pic_bg_png"));e.prototype.addChild.call(this,i),this.fire=new egret.Bitmap(RES.getRes("dahuoji_png")),this.fire.x=(720-this.fire.width)/2,this.fire.y=750,this.fire.touchEnabled=!0,this.fire.addEventListener(egret.TouchEvent.TOUCH_TAP,this.touchHandler,this),egret.Tween.get(this.fire,{loop:!0}).to({y:this.fire.y-30},500,egret.Ease.cubicIn).to({y:this.fire.y},500,egret.Ease.cubicOut),e.prototype.addChild.call(this,this.fire)},n.AddTimer=function(){var e=new egret.Timer(500,0);e.addEventListener(egret.TimerEvent.TIMER,this.RepeatTimer,this),e.start()},n.touchHandler=function(e){var t=this;egret.Tween.removeTweens(this.fire),egret.Tween.get(this.fire).to({y:1500},500,egret.Ease.cubicIn).call(function(){t.dispatchEvent(t.tabFireEvent)})},n.RepeatTimer=function(){e.prototype.swapChildren.call(this,this.bg1,this.bg2),20==this.lamp1.rotation?(this.lamp1.rotation=-20,this.lamp1.anchorOffsetY=-this.lamp1.height/3,this.lamp2.rotation=-20,this.lamp2.anchorOffsetY=-this.lamp1.height/3):(this.lamp1.rotation=20,this.lamp1.anchorOffsetY=0,this.lamp2.rotation=20,this.lamp2.anchorOffsetY=0)},t}(egret.Sprite);egret.registerClass(BeginUI,"BeginUI");var EndUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){var t=new egret.Shape;t.graphics.beginFill(16761219),t.graphics.drawRect(0,0,750,1155),t.graphics.endFill,e.prototype.addChild.call(this,t);var i=new egret.Bitmap(RES.getRes("top_png"));e.prototype.addChild.call(this,i),this.addImg(),this.addTxt()},n.addImg=function(){var t=new egret.Bitmap(RES.getRes("waiting1_png"));t.x=(720-t.width)/2,t.y=280,e.prototype.addChild.call(this,t);var i=new egret.Bitmap(RES.getRes("waiting2_png"));i.x=(720-t.width)/2,i.y=280,i.visible=!1,e.prototype.addChild.call(this,i);var n=new egret.Timer(100,0);n.addEventListener(egret.TimerEvent.TIMER,function(e){t.visible=!t.visible,i.visible=!i.visible},this),n.start()},n.addTxt=function(){for(var e=this,t=new Array,i=function(i){var n=new egret.Bitmap(RES.getRes("text"+i+"_png"));n.x=(720-n.width)/2,n.y=500+50*i,n.visible=!1,e.addChild(n),t.push(n)},n=0;10>n;n++)i(n+1);var s=new egret.Timer(500,10),r=0;s.addEventListener(egret.TimerEvent.TIMER,function(i){if(t[r++].visible=!0,10==r){var n=new QuestionUICloseEvent(QuestionUICloseEvent.NAME);e.dispatchEvent(n)}},this),s.start()},t}(egret.Sprite);egret.registerClass(EndUI,"EndUI");var QuestionUICloseEvent=function(e){function t(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}__extends(t,e);var i=(__define,t);i.prototype;return t.NAME="QuestionUICloseEvent",t}(egret.Event);egret.registerClass(QuestionUICloseEvent,"QuestionUICloseEvent");var TabFireEvent=function(e){function t(t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),e.call(this,t,i,n)}__extends(t,e);var i=(__define,t);i.prototype;return t.NAME="TabFireEvent",t}(egret.Event);egret.registerClass(TabFireEvent,"TabFireEvent");var FormOk=function(e){function t(t,i){e.call(this),this.na=t,this.no=i,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var t=new egret.Shape;t.graphics.beginFill(16777215),t.graphics.drawRoundRect(60,192,600,640,25),t.graphics.endFill(),t.touchEnabled=!0,e.prototype.addChild.call(this,t);var i=new egret.Bitmap(RES.getRes("icon_yes_png"));i.y=258,i.x=(720-i.width)/2,e.prototype.addChild.call(this,i);var n=new egret.TextField;n.textColor=8882055,n.size=35,n.width=600,n.x=90,n.y=432,n.text="尊敬的"+this.na+"商户您好：",e.prototype.addChild.call(this,n);var s=new egret.TextField;s.textColor=8882055,s.size=35,s.width=540,s.x=90,s.y=512,s.text="您已成功预约云迈网络游戏定制服务，暨已成功获得价值699的定制咨询服务一次。",e.prototype.addChild.call(this,s);var r=new egret.TextField;r.textColor=8882055,r.size=35,r.width=540,r.x=90,r.y=630,r.text="您预留的联系方式是 "+this.no+"。我们将第一时间与您联系，感谢您对云迈网络的支持！",e.prototype.addChild.call(this,r)},t}(egret.Sprite);egret.registerClass(FormOk,"FormOk");var FormUI=function(e){function t(){e.call(this),this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var t=this,i=new egret.Bitmap(RES.getRes("gift_bg_png"));i.y=(1155-i.height)/2,i.x=(720-i.width)/2,i.touchEnabled=!0,e.prototype.addChild.call(this,i),this.inputName=new egret.TextField,this.inputName.type=egret.TextFieldType.INPUT,this.inputName.textColor=8882055,this.inputName.size=40,this.inputName.width=444,this.inputName.height=90,this.inputName.x=149,this.inputName.y=452,e.prototype.addChild.call(this,this.inputName),this.inputNo=new egret.TextField,this.inputNo.type=egret.TextFieldType.INPUT,this.inputNo.textColor=8882055,this.inputNo.size=40,this.inputNo.width=444,this.inputNo.height=90,this.inputNo.x=149,this.inputNo.y=622,e.prototype.addChild.call(this,this.inputNo);var n=new egret.Bitmap(RES.getRes("tijiao_btn_png"));n.y=740,n.x=(720-n.width)/2,n.touchEnabled=!0,n.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(t.inputName.text.length>24)return void alert("商户名称最长12位");if(11!=t.inputNo.text.length)return void alert("手机号必须11位");var e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open("http://httpbin.org/get",egret.HttpMethod.GET),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(),e.addEventListener(egret.Event.COMPLETE,t.onGetComplete,t),e.addEventListener(egret.IOErrorEvent.IO_ERROR,t.onGetIOError,t)},this),e.prototype.addChild.call(this,n)},n.onGetComplete=function(){var e=new QuestionUICloseEvent(QuestionUICloseEvent.NAME);this.dispatchEvent(e)},n.onGetIOError=function(){console.log("请求错误");var e=new QuestionUICloseEvent(QuestionUICloseEvent.NAME);this.dispatchEvent(e)},t}(egret.Sprite);egret.registerClass(FormUI,"FormUI");var LoadingUI=function(e){function t(){e.call(this),this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){var t=this,i=new egret.Shape;i.graphics.beginFill(16761219),i.graphics.drawRect(0,0,750,1155),i.graphics.endFill,e.prototype.addChild.call(this,i);for(var n=new Array,s=function(e){var i=new egret.Bitmap(RES.getRes("jisuanzhong"+e+"_png"));i.x=(720-i.width)/2,i.y=350,i.visible=!1,t.addChild(i),n.push(i)},r=0;7>r;r++)s(r+1);var a=new egret.Timer(100,0),o=0;a.addEventListener(egret.TimerEvent.TIMER,function(e){0==o?(n[0].visible=!0,n[6].visible=!1):(n[o].visible=!0,n[o-1].visible=!1),o++,7==o&&(o=0)},this),a.start(),this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=577.5,this.textField.size=30,this.textField.width=720,this.textField.textColor=0,this.textField.verticalAlign="center",this.textField.textAlign="center"},n.setProgress=function(e,t){this.textField.text="正在加载..."+e+"/"+t},t}(egret.Sprite);egret.registerClass(LoadingUI,"LoadingUI");var Main=function(e){function t(){e.call(this),this.currentQuestionNum=1,this.totalNum=0,this.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this)}__extends(t,e);var i=(__define,t),n=i.prototype;return n.onAddToStage=function(e){RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},n.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("loading"),RES.loadGroup("preload"),RES.loadGroup("share"),RES.loadGroup("moreInfo")},n.onResourceLoadComplete=function(e){"loading"==e.groupName&&(this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView)),"preload"==e.groupName&&(RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},n.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},n.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},n.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},n.createGameScene=function(){var e=this;this.stage.scaleMode=egret.StageScaleMode.FIXED_WIDTH,egret.Tween.get(this.loadingView).to({alpha:0},2e3,egret.Ease.circIn).call(function(){e.stage.removeChild(e.loadingView),e.addBeginUI()})},n.addBeginUI=function(){this.beginUI=new BeginUI,this.beginUI.addEventListener(TabFireEvent.NAME,this.showQuestionUI,this),e.prototype.addChild.call(this,this.beginUI)},n.showQuestionUI=function(t){var i=this;this.beginUI&&egret.Tween.get(this.beginUI).to({alpha:0},500,egret.Ease.circIn).call(function(){e.prototype.removeChild.call(i,i.beginUI),i.beginUI=null}),this.questionUI&&egret.Tween.get(this.questionUI).to({alpha:0},500,egret.Ease.circIn).call(function(){e.prototype.removeChildAt.call(i,0),i.totalNum+=Number(t.num)}),this.getImg(this.currentQuestionNum++),this.questionUI=new QuestionUI(this.question,this.question2,this.a,this.b,this.c,this.d),this.currentQuestionNum>4?this.questionUI.addEventListener(QuestionUICloseEvent.NAME,this.showEndUI,this):this.questionUI.addEventListener(QuestionUICloseEvent.NAME,this.showQuestionUI,this),e.prototype.addChild.call(this,this.questionUI),this.questionUI.alpha=0,egret.Tween.get(this.questionUI).wait(500).to({alpha:1},500,egret.Ease.circIn).call(function(){i.questionUI.enableTab()})},n.showEndUI=function(t){var i=this;this.questionUI&&egret.Tween.get(this.questionUI).to({alpha:0},500,egret.Ease.circIn).call(function(){e.prototype.removeChildAt.call(i,0)}),this.totalNum+=Number(t.num);var n=new EndUI;n.addEventListener(QuestionUICloseEvent.NAME,this.endUIClose,this),e.prototype.addChild.call(this,n)},n.getImg=function(e){this.question=new egret.Bitmap(RES.getRes("Q"+e+"_pic1_png")),this.question2=new egret.Bitmap(RES.getRes("Q"+e+"_pic2_png")),this.a=new egret.Bitmap(RES.getRes("Q"+e+"_Option1_png")),this.a.name="1",this.b=new egret.Bitmap(RES.getRes("Q"+e+"_Option2_png")),this.b.name="2",this.c=new egret.Bitmap(RES.getRes("Q"+e+"_Option3_png")),this.c.name="3",this.d=new egret.Bitmap(RES.getRes("Q"+e+"_Option4_png")),this.d.name="4"},n.endUIClose=function(t){var i=this,n=t.currentTarget;egret.Tween.get(n).to({scaleX:0,scaleY:0,x:360,y:577.5},500,egret.Ease.circOut).call(function(){e.prototype.removeChild.call(i,n),i.showShareUI()})},n.showShareUI=function(){var t=this,i=new ShareUI(this.totalNum);i.x=360,i.y=577.5,i.scaleX=0,i.scaleY=0,egret.Tween.get(i).to({scaleX:1,scaleY:1,x:0,y:0},500,egret.Ease.circIn),i.addEventListener(QuestionUICloseEvent.NAME,function(){e.prototype.removeChildren.call(t),t.totalNum=0,t.currentQuestionNum=1,t.questionUI=null,t.beginUI=null,t.addBeginUI()},this),e.prototype.addChild.call(this,i)},t}(egret.DisplayObjectContainer);egret.registerClass(Main,"Main");var MoreInfo=function(e){function t(){var t=this;e.call(this);var i=new egret.Shape;i.graphics.beginFill(0,.8),i.graphics.drawRect(0,0,720,1155),i.graphics.endFill(),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.parent.removeChild(t),document.getElementById("qr").style.visibility="hidden"},this),e.prototype.addChild.call(this,i);var n=new egret.Bitmap(RES.getRes("guanzhu_bg_png"));n.x=(720-n.width)/2,n.y=100,n.touchEnabled=!0,e.prototype.addChild.call(this,n);var s=new egret.Bitmap(RES.getRes("dingzhi_btn_png"));s.x=(720-s.width)/2,s.y=810,s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.prototype.removeChild.call(t,n),e.prototype.removeChild.call(t,s),document.getElementById("qr").style.visibility="hidden";var i=new FormUI;i.addEventListener(QuestionUICloseEvent.NAME,function(){e.prototype.addChild.call(t,new FormOk(i.inputName.text,i.inputNo.text)),e.prototype.removeChild.call(t,i)},t),e.prototype.addChild.call(t,i)},this),e.prototype.addChild.call(this,s)}__extends(t,e);var i=(__define,t);i.prototype;return t}(egret.Sprite);egret.registerClass(MoreInfo,"MoreInfo");var QuestionUI=function(e){function t(t,i,n,s,r,a){e.call(this),this.question=t,this.question2=i,this.a=n,this.b=s,this.c=r,this.d=a,this.createView()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.createView=function(){var t=new egret.Shape;t.graphics.beginFill(16761219),t.graphics.drawRect(0,0,720,1155),t.graphics.endFill(),e.prototype.addChild.call(this,t);var i=new egret.Bitmap(RES.getRes("top_png"));e.prototype.addChild.call(this,i),this.question.y=185,this.question.x=50,e.prototype.addChild.call(this,this.question),this.question2.y=185,this.question2.x=50,this.question2.visible=!1,e.prototype.addChild.call(this,this.question2),this.a.x=100,this.a.y=656,e.prototype.addChild.call(this,this.a),this.b.x=100,this.b.y=763,e.prototype.addChild.call(this,this.b),this.c.x=100,this.c.y=872,e.prototype.addChild.call(this,this.c),this.d.x=100,this.d.y=980,e.prototype.addChild.call(this,this.d),this.addTimer(),this.addEvent()},n.addEvent=function(){this.a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemTap,this),this.b.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemTap,this),this.c.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemTap,this),this.d.addEventListener(egret.TouchEvent.TOUCH_TAP,this.itemTap,this)},n.itemTap=function(e){var t=this,i=new QuestionUICloseEvent(QuestionUICloseEvent.NAME),n=e.currentTarget;n.touchEnabled=!1;var s=n.name;i.num=s,egret.Tween.get(this.a).to({x:this.a.x-720},500,egret.Ease.cubicIn),egret.Tween.get(this.c).to({x:this.a.x-720},500,egret.Ease.cubicIn),egret.Tween.get(this.b).to({x:this.a.x+720},500,egret.Ease.cubicIn),egret.Tween.get(this.d).to({x:this.a.x+720},500,egret.Ease.cubicIn).call(function(){t.dispatchEvent(i)})},n.addTimer=function(){var e=this,t=new egret.Timer(150);t.addEventListener(egret.TimerEvent.TIMER,function(){e.question.visible=!e.question.visible,e.question2.visible=!e.question2.visible},this),t.start()},n.enableTab=function(){this.a.touchEnabled=!0,this.b.touchEnabled=!0,this.c.touchEnabled=!0,this.d.touchEnabled=!0},t}(egret.Sprite);egret.registerClass(QuestionUI,"QuestionUI");var ShareHand=function(e){function t(){var t=this;e.call(this);var i=new egret.Shape;i.graphics.beginFill(0,.8),i.graphics.drawRect(0,0,720,1155),i.graphics.endFill(),i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.parent.removeChild(t)},this),e.prototype.addChild.call(this,i);var n=new egret.Bitmap(RES.getRes("share_pic1_png"));n.x=520,n.y=30,e.prototype.addChild.call(this,n);var s=new egret.Bitmap(RES.getRes("share_pic2_png"));s.x=520,s.y=30,s.visible=!1,e.prototype.addChild.call(this,s);var r=new egret.Timer(300,0);r.addEventListener(egret.TimerEvent.TIMER,function(){n.visible=!n.visible,s.visible=!s.visible},this),r.start()}__extends(t,e);var i=(__define,t);i.prototype;return t}(egret.Sprite);egret.registerClass(ShareHand,"ShareHand");var ShareUI=function(e){function t(t){e.call(this),this.totalNum=t,this.init()}__extends(t,e);var i=(__define,t),n=i.prototype;return n.init=function(){var t=this,i=new egret.Bitmap(RES.getRes("光芒背景1_png"));e.prototype.addChild.call(this,i);var n=new egret.Bitmap(RES.getRes("top_png"));e.prototype.addChild.call(this,n);var s=new egret.Bitmap(RES.getRes("更多惊喜btn_png"));s.x=(720-s.width)/2,s.y=830,s.touchEnabled=!0,s.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var i=new MoreInfo;e.prototype.addChild.call(t,i);var n=document.getElementById("qr");n.style.visibility="visible"},this),e.prototype.addChild.call(this,s);var r=new egret.Bitmap(RES.getRes("分享游戏_png"));r.x=(720-r.width)/2+150,r.y=950,r.touchEnabled=!0,r.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.addChild(new ShareHand)},this),e.prototype.addChild.call(this,r);var a=new egret.Bitmap(RES.getRes("重新游戏_png"));a.x=(720-a.width)/2-150,a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=new QuestionUICloseEvent(QuestionUICloseEvent.NAME);t.dispatchEvent(e)},this),a.y=950,e.prototype.addChild.call(this,a);var o=new egret.TextField;o.text="出品：云迈网络  创意：互联网",o.width=720,o.textAlign="center",o.textColor=13208397,o.y=1080,e.prototype.addChild.call(this,o),this.addDynamicPic()},n.addDynamicPic=function(){this.totalNum<=4?this.AddDynamicPicItem(1):this.totalNum>4&&this.totalNum<=8?this.AddDynamicPicItem(2):this.totalNum>8&&this.totalNum<=12?this.AddDynamicPicItem(3):this.totalNum>12&&this.totalNum<=16&&this.AddDynamicPicItem(4)},n.AddDynamicPicItem=function(t){var i=new egret.Bitmap(RES.getRes("A"+t+"_DL1_png"));i.x=20,i.y=180,e.prototype.addChild.call(this,i);var n=new egret.Bitmap(RES.getRes("A"+t+"_DL2_png"));n.x=700-n.width,n.y=180,e.prototype.addChild.call(this,n);var s=new egret.Bitmap(RES.getRes("A"+t+"_DL3_png"));s.x=(720-s.width)/2,s.y=30,e.prototype.addChild.call(this,s);var r=new egret.Bitmap(RES.getRes("A"+t+"_PIC1_png"));r.x=(720-r.width)/2,r.y=230,e.prototype.addChild.call(this,r);var a=new egret.Bitmap(RES.getRes("A"+t+"_PIC2_png"));a.x=(720-a.width)/2,a.y=230,a.visible=!1;var o=new egret.Timer(100,0);o.addEventListener(egret.TimerEvent.TIMER,function(e){r.visible=!r.visible,a.visible=!a.visible},this),o.start(),e.prototype.addChild.call(this,a)},t}(egret.Sprite);egret.registerClass(ShareUI,"ShareUI");